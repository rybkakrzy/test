using System;
using System.Text;

public static class NumberToWordsConverter
{
    private static readonly string[] Units =
    {
        "", "jeden", "dwa", "trzy", "cztery", "pięć",
        "sześć", "siedem", "osiem", "dziewięć",
        "dziesięć", "jedenaście", "dwanaście", "trzynaście",
        "czternaście", "piętnaście", "szesnaście", "siedemnaście",
        "osiemnaście", "dziewiętnaście"
    };

    private static readonly string[] Tens =
    {
        "", "", "dwadzieścia", "trzydzieści", "czterdzieści", "pięćdziesiąt",
        "sześćdziesiąt", "siedemdziesiąt", "osiemdziesiąt", "dziewięćdziesiąt"
    };

    private static readonly string[] Hundreds =
    {
        "", "sto", "dwieście", "trzysta", "czterysta", "pięćset",
        "sześćset", "siedemset", "osiemset", "dziewięćset"
    };

    private static readonly string[,] Groups =
    {
        { "", "", "" },
        { "tysiąc", "tysiące", "tysięcy" },
        { "milion", "miliony", "milionów" },
        { "miliard", "miliardy", "miliardów" }
    };

    /// <summary>
    /// Converts a decimal amount to Polish words with currency (złote, grosze).
    /// </summary>
    public static string ToPolishCurrencyWords(decimal amount)
    {
        long zloty = (long)Math.Floor(amount);
        int grosze = (int)((amount - zloty) * 100);

        string zlotyPart = NumberToWords(zloty);
        string groszePart = grosze.ToString("D2") + "/100";

        return $"{zlotyPart} złotych {groszePart}";
    }

    /// <summary>
    /// Converts a number to Polish words (supports up to billions).
    /// </summary>
    private static string NumberToWords(long number)
    {
        if (number == 0)
            return "zero";

        var sb = new StringBuilder();
        int group = 0;

        while (number > 0)
        {
            int hundreds = (int)(number % 1000);
            number /= 1000;

            if (hundreds > 0)
            {
                string groupWords = ThreeDigitsToWords(hundreds);

                // Choose correct group suffix depending on number
                int form = GetGroupForm(hundreds);
                string groupSuffix = Groups[group, form];

                sb.Insert(0, $"{groupWords} {groupSuffix} ");
            }
            group++;
        }

        return sb.ToString().Trim();
    }

    /// <summary>
    /// Converts numbers from 1 to 999 into words.
    /// </summary>
    private static string ThreeDigitsToWords(int number)
    {
        var sb = new StringBuilder();

        int h = number / 100;
        int t = (number % 100) / 10;
        int u = number % 10;

        if (h > 0)
            sb.Append(Hundreds[h] + " ");

        if (t == 1 && u > 0) // from 11 to 19
        {
            sb.Append(Units[10 + u] + " ");
        }
        else
        {
            if (t > 0)
                sb.Append(Tens[t] + " ");
            if (u > 0)
                sb.Append(Units[u] + " ");
        }

        return sb.ToString().Trim();
    }

    /// <summary>
    /// Returns grammatical form of group name (1 - singular, 2 - plural, 3 - many).
    /// </summary>
    private static int GetGroupForm(int number)
    {
        if (number == 1)
            return 0;

        int n10 = number % 10;
        int n100 = number % 100;

        if (n10 >= 2 && n10 <= 4 && !(n100 >= 12 && n100 <= 14))
            return 1;

        return 2;
    }
}



-------------------------



import { Component } from '@angular/core';
import { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';

type Dictionary = Record<string, string>;

interface CheckboxItemGroup {
  // Typed FormControls for better type safety
  key: FormControl<string>;
  label: FormControl<string>;
  checked: FormControl<boolean>;
}

@Component({
  selector: 'app-permissions',
  templateUrl: './permissions.component.html',
})
export class PermissionsComponent {
  // Root form with a single FormArray named "items"
  readonly form = this.fb.group({
    items: this.fb.array<FormGroup<CheckboxItemGroup>>([]),
  });

  constructor(private readonly fb: FormBuilder) {
    // Example dictionary: key -> label
    const dict: Dictionary = {
      read: 'Can read',
      write: 'Can write',
      share: 'Can share',
      delete: 'Can delete',
    };

    // (Optional) Preselected keys
    const preselected = ['read', 'share'];

    // Build FormArray from dictionary
    this.form.setControl('items', this.buildCheckboxArray(dict, preselected));
  }

  // Convenience getter for template access
  get items(): FormArray<FormGroup<CheckboxItemGroup>> {
    return this.form.get('items') as FormArray<FormGroup<CheckboxItemGroup>>;
  }

  buildCheckboxArray(dict: Dictionary, preselectedKeys: string[] = []): FormArray<FormGroup<CheckboxItemGroup>> {
    // Create a FormGroup per dictionary entry
    const groups = Object.entries(dict).map(([key, label]) =>
      this.fb.group<CheckboxItemGroup>({
        // Store the key and label as string controls (read-only in UI, but kept in the form for easy access)
        key: new FormControl(key, { nonNullable: true, validators: [Validators.required] }),
        label: new FormControl(label, { nonNullable: true, validators: [Validators.required] }),
        // The actual checkbox value
        checked: new FormControl(preselectedKeys.includes(key), { nonNullable: true }),
      })
    );

    return this.fb.array<FormGroup<CheckboxItemGroup>>(groups);
  }

  trackByIndex(index: number): number {
    // Simple and efficient trackBy for *ngFor
    return index;
  }

  getSelectedKeys(): string[] {
    // Returns all keys which are currently checked
    return this.items.controls
      .filter(group => group.controls.checked.value === true)
      .map(group => group.controls.key.value);
  }

  onSubmit(): void {
    // Example submit handler
    const selected = this.getSelectedKeys();
    console.log('Selected keys:', selected);
    // TODO: handle the result as needed (send to API, etc.)
  }
}


--------------------------------------


<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div formArrayName="items">
    <ng-container
      *ngFor="let group of items.controls; let i = index; trackBy: trackByIndex"
      [formGroupName]="i"
    >
      <div class="flex items-center gap-2 py-1">
        <!-- Use a stable id derived from the key to tie input and label -->
        <input
          type="checkbox"
          formControlName="checked"
          [id]="'chk-' + group.controls.key.value"
        />
        <label
          class="cursor-pointer"
          [for]="'chk-' + group.controls.key.value"
        >
          {{ group.controls.label.value }}
        </label>
      </div>
    </ng-container>
  </div>

  <button type="submit">Save</button>
</form>
